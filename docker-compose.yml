version: "3.5"

services:
  server:
    image: git@github.com:braxtonhall/bobs-server.git:docker # TODO before merging this should be main
    ports:
      - "80:80"
      - "443:443"
    restart: always
    environment:
      DATABASE_URL: file://app/db/main.sqlite
    volumes:
      - "${HOST_DB_DIR}:/app/db"
  dev-server:
    build:
      context: ./
    ports:
      - "8080:80"
      - "8443:443"
    restart: always
    environment:
      DATABASE_URL: file://app/db/dev.sqlite
    volumes:
      - "${HOST_DB_DIR}:/app/db"
